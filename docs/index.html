<!DOCTYPE html>
<html class=''>

<head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    <title>Retaliate or Carry-on: Reactive AGression Experiment</title>
    <link rel='stylesheet' type='text/css' href='https://users.rcc.uchicago.edu/~kywch/RC-RAGE_jsPsych/lib/rc-rage.css'>
</head>

<body>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js'></script>
    <script src='https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/lib/jspsych.js'></script>
    <script src='https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/lib/jspsych-fullscreen.js'></script>
    <script src='https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/lib/jspsych-instructions.js'></script>
    <script src='https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/lib/jspsych-audio-keyboard-with-replay.js'>
    </script>
    <script src='https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/lib/jspsych-rc-rage.js'></script>
    <script src='https://users.rcc.uchicago.edu/~kywch/RC-RAGE_jsPsych/lib/rc-rage_main.js'></script>

    <script>
        $(document).ready(function () {

            // set the display stage
            jQuery('<div class = display_stage_background></div>').appendTo('body');
            jQuery('<div class = display_stage></div>').appendTo('body');

            var takeBackAmount = "0";

            sbjId = "test";
            save_url = "";
            var instr_url = 'https://cdn.jsdelivr.net/gh/kywch/RC-RAGE_jsPsych@master/instruction_0pt/';
            var instr_imglist = get_instruction_imglist(instr_url, 30);

            var jspsych_session = [];

            // use the full screen
            jspsych_session.push({
                type: 'fullscreen',
                fullscreen_mode: true
            });

            jspsych_session.push({
                timeline: generate_instruction_block(instr_imglist, parseInt(takeBackAmount))
            });

            jspsych_session.push({
                timeline: generate_practice_block(parseInt(takeBackAmount))
            });

            jspsych_session.push({
                timeline: generate_main_block(parseInt(takeBackAmount))
            });

            // exit the full screen
            jspsych_session.push({
                type: 'fullscreen',
                fullscreen_mode: false
            });

            jsPsych.init({
                timeline: jspsych_session,
                preload_images: instr_imglist,

                display_element: document.querySelector('.display_stage'),

                on_data_update: function (data) { // each time the data is updated:
                    // write the current window resolution to the data
                    data.win_res = window.innerWidth + 'x' + window.innerHeight;
                },
                
                exclusions: { // browser window needs to have these dimensions, if not, participants get the chance to maximize their window, if they don't support this resolution when maximized they can't particiate.
                    min_width: 1000,
                    min_height: 700
                },

                on_finish: function () {
                    // clear the stage
                    jQuery('.display_stage').remove();
                    jQuery('.display_stage_background').remove();
                    if (flag_debug) {
                        console.log(jsPsych.data.get().json());
                    }
                }
            });
        });
    </script>
    
    <!-- The below code is not necessary to run the task -->
    <br><br><br><br><br><br>
    <p style="text-align:center">Retaliate or Carry-On: Reactive AGgression Experiment (RC-RAGE)</p>
    <p style="text-align:center">This task is maintained by <a href="https://kywch.github.io">Kyoung Whan Choe</a>.</p>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-102316-3', 'auto');
      ga('send', 'pageview');
    </script>    
    
</body>

</html>
